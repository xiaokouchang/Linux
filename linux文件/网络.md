@[TOC](文 章 目 录)
>💻作 者 简 介：曾 与 你 一 样 迷 茫，现 以 经 验 助 你 入 门 Linux。
>💡个 人 主 页：[@笑口常开xpr 的 个 人 主 页](https://blog.csdn.net/2301_78847073?spm=1000.2115.3001.5343)
>📚系 列 专 栏：[Linux 探 索 之 旅：从 命 令 行 到 系 统 内 核](https://blog.csdn.net/2301_78847073/category_13024932.html)
>✨代 码 趣 语：静 态 库 是 装 满 工 具 的 箱 子，编 译 时 全 塞 程 序，方 便 但 沉；动 态 库 是 共 享 架，记 位 置，没 工 具 就 卡 壳。
>💪代 码 千 行，始 于 坚 持，每 日 敲 码，进 阶 编 程 之 路。
>📦gitee 链 接：[gitee](https://gitee.com/xiaokouchangkai123)

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/fc8d52ed792a4cec88378dd286938beb.gif)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在 Linux C/C++ 开 发 中，库 是 代 码 复 用 和 工 程 化 的 核 心。不 少 开 发 者 会 遇 到 源 码 泄 露、编 译 “找 不 到 头 文 件 / 库”、动 态 库 运 行 加 载 失 败 等 问 题，本 质 是 对 库 的 流 程 不 熟 悉。本 文 从 背 景 切 入，先 讲 静 态 库 的 原 理、制 作 与 使 用，再 讲 动 态 库 的 实 战 技 巧，帮 你 掌 握 库 的 全 流 程 应 用。
***
# 网 络
**独 立 模 式**：计 算 机 之 间 相 互 独 立。

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/1c084953ab344e75b2e7b3b492e1d624.png)
**网 络 互 联**：多 台 计 算 机 连 接 在 一 起，完 成 数 据 共 享 和 交 互。
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/53e5dbd0da05478cb0197d9e4d41b227.png)
**局 域 网 LAN**：计 算 机 数 量 更 多 了，通 过 交 换 机 和 路 由 器 连 接 在 一 起。
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/6e880fb34ced479e81011ad1511ad4b1.png)
**广 域 网 WAN**：将 远 隔 千 里 的 计 算 机 都 连 在 一 起。
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/b3a8f8b290a3403bba402b466cb678e1.png)
# 协 议
## 定 义
1. 协 议 是 双 方 的 约 定，最 终 的 表 现 形 式 是 双 方 都 能 认 识 的 结 构 体 对 象。
2. 发 送 数 据 时，除 了 消 息 本 身 之 外，还 需 要 多 发 送 一 些 内 容，这 些 内 容 就 是 协 议。

## 问 题
由 于 主 机 之 间 的 传 输 距 离 变 长 了，会 产 生 下 列 的 问 题：
1. 定 位 主 机。
2. 长 距 离 传 送 中 数 据 丢 失 的 问 题。
3. 保 证 数 据 准 确 的 到 达 下 一 个 设 备。
4. 处 理 发 来 的 数 据。

主 机 是 对 称 的，每 一 层 都 有 自 己 的 协 议。
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/76808fa64ca6419abf040c5b110b0600.png)
***
## 网 络 协 议
### 定 义
计 算 机 之 间 的 传 输 媒 介 是 光 信 号 和 电 信 号。通 过 "频 率" 和 "强 弱" 来 表 示 0 和 1 这 样 的 信 息。要 想 传 递 各 种 不 同 的 信 息，就 需 要 约 定 好 双 方 的 数 据 格 式。

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/66897a3b549a4a0ea9f68c1f274a142f.png)

计 算 机 生 产 厂 商 有 很 多；计 算 机 操 作 系 统 也 有 很 多；计 算 机 网 络 硬 件 设 备 还 有 很 多；要 让 这 些 不 同 厂 商 之 间 生 产 的 计 算 机 能 够 相 互 顺 畅 的 通 信，就 需 要 约 定 一 个 共 同 的 标 准，大 家 都 来 遵 守，这 就 是 网 络 协 议。
***
### 协 议 分 层
**打 电 话**
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/f135f75a535c477e8e2b4023e70957b9.png)
层 和 层 之 间 通 过 话 筒 进 行 交 互，同 层 之 间 是 高 内 聚、低 耦 合。在 这 个 例 子 中，协 议 只 有 两 层。分 层 不 一 定 是 上 下 分 层，也 可 以 是 左 右 分 层。软 件 分 层 表 现 是 在 结 构 体 或 类 的 数 据 层 面 或 者 软 件 逻 辑 上 做 分 离。但 是 实 际 的 网 络 通 信 会 更 加 复 杂，需 要 分 更 多 的 层 次。分 层 最 大 的 好 处 在 于 "封 装"，即 通 过 高 内 聚，低 耦 合 降 低 软 件 维 护 成 本。
***
## 网 络 协 议 分 层 的 原 因
1. 网 络 的 项 目 比 较 大，分 层 便 于 维 护 和 管 理。
2. 网 络 的 问 题 是 层 状 的，协 议 也 应 该 是 层 状 的。
3. 数 据 传 输 的 可 靠 性。
***
## OSI 七 层 模 型
1. OSI（开 放 系 统 互 连）七 层 网 络 模 型 称 为 开 放 式 系 统 互 联 参 考 模 型，是 一 个 逻 辑 上 的 定 义 和 规  范；
2. 把 网 络 从 逻 辑 上 分 为 了 7 层。每 一 层 都 有 相 关、相 对 应 的 物 理 设 备，比 如 路 由 器，交 换 机。
3. OSI 七 层 模 型 是 一 种 框 架 性 的 设 计 方 法，其 最 主 要 的 功 能 使 就 是 帮 助 不 同 类 型 的 主 机 实 现 数 据 传 输。
4. 最 大 优 点 是 将 服 务、接 口 和 协 议 这 三 个 概 念 明 确 地 区 分 开 来，概 念 清 楚，理 论 也 比 较 完 整
5. 通 过 七 个 层 次 化 的 结 构 模 型 使 不 同 的 系 统 不 同 的 网 络 之 间 实 现 可 靠 的 通 讯。但 是，它 既 复 杂 又 不 实 用，所 以 我 们 按 照 TCP / IP 四 层 模 型 来 讲 解。
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/32f45ef30c6a45a182fd7d894293ba29.png)
实 际 工 程 实 践 中 没 有 会 话 层 和 表 示 层，软 件 方 面 只 关 心 数 据 链 路 层、网 络 层、传 输 层 和 应 用 层。
# TCP / IP 五 层（或 四 层）模 型
TCP / IP 是 一 组 协 议 的 代 名 词，它 还 包 括 许 多 协 议，组 成 了 TCP / IP 协 议 簇。
TCP / IP 通 讯 协 议 采 用 了 5 层 的 层 级 结 构，每 一 层 都 呼 叫 它 的 下 一 层 所 提 供 的 网 络 来 完 成 自 己 的 需 求。
**物 理 层**：负 责 光 / 电 信 号 的 传 递 方 式。比 如 现 在 以 太 网 通 用 的 网 线（双 绞 线）、早 期 以 太 网 采 用 的 的 同 轴 电 缆（现 在 主 要 用 于 有 线 电 视）、光 纤，现 在 的 wifi 无 线 网 使 用 电 磁 波 等 都 属 于 物 理 层 的 概 念。物 理 层 的 能 力 决 定 了 最 大 传 输 速 率、传 输 距 离、抗 干 扰 性 等。集 线 器(Hub) 工 作 在 物 理 层。

**光 纤**
![光 纤](https://i-blog.csdnimg.cn/direct/4e4eaa8b36b746af9600859aa85512a7.png)

**数 据 链 路 层**：负 责 设 备 之 间 的 数 据 帧 的 传 送 和 识 别 。例 如 网 卡 设 备 的 驱 动、帧 同 步（就 是 说 从 网 线 上 检 测 到 什 么 信 号 算 作 新 帧 的 开 始)、冲 突 检 测(如 果 检 测 到 冲 突 就 自 动 重 发)、数 据 差 错 校 验 等 工 作。有 以 太 网、令 牌 环 网，无 线 LAN 等 标 准。交 换 机 (Switch) 工 作 在 数 据 链 路 层。

**网 络 层**：身 份 识 别 和 标 识，负 责 地 址 管 理 和 路 由 选 择。例 如 在 IP 协 议 中，通 过 IP 地 址 来 标 识 一 台 主 机，并 通 过 路 由 表 的 方 式 规 划 出 两 台 主 机 之 间 的 数 据 传 输 的 线 路(路 由)。路 由 器 工 作 在 网 路 层。

**传 输 层**：负 责 两 台 主 机 之 间 的 数 据 传 输。如 传 输 控 制 协 议 (TCP)，能 够 确 保 数 据 可 靠 的 从 源 主 机 发 送 到 目 标 主 机。

**应 用 层**：负 责 应 用 程 序 间 沟 通，如 简 单 电 子 邮 件 传 输 （SMTP）、文 件 传 输 协 议（FTP）、网 络 远 程 访 问 协 议（Telnet）等。

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/fc8a2cde83d0469ebc1411fe1423a033.png)
## 网 络 和 硬 件 的 关 系
网 络 通 信 的 本 质 是 贯 穿 协 议 栈 的 过 程。
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/922e6fe01aef4a21b24f15dfc6357299.png)
不 同 硬 件（设 备） 之 间 通 过 网 络 来 连 接。
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/c07fcc9ae5f3444882121aaf9864f6bf.png)
局 域 网 当 中 任 意 两 台 主 机 可 以 直 接 通 信。
## 网 络 传 输 基 本 流 程
同 一 个 网 段 内 的 两 台 主 机 进 行 文 件 传 输。
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/b265aab0844740ecb5298cecabf0fcaf.png)
两 台 计 算 机 通 过 TCP / IP 协 议 通 讯 的 过 程 如 下 图 所 示：
网 络 协 议 栈 的 层 状 结 构 中，每 一 层 都 有 协 议。
## 报 头 和 报 文
报 头：报 头 是 附 加 在 有 效 载 荷 前 的 “元 数 据”（控 制 信 息），由 当 前 协 议 层 根 据 自 身 规 则 生 成，用 于 描 述 报 文 的 属 性、指 导 网 络 设 备 处 理 报 文，或 让 接 收 方 正 确 解 析 数 据。

报 文：报 文 是 网 络 中 传 输 的 “完 整 数 据 块”，是 通 信 双 方 交 换 信 息 的 基 本 单 位。它 包 含 了 “要 传 输 的 实 际 数 据” 以 及 “辅 助 传 输 的 控 制 信 息”，本 质 是 “有 效 数 据 + 控 制 信 息” 的 组 合 体。

**有 效 载 荷**：真 正 需 要 传 输 的 “用 户 数 据”。

`报 文 = 报 头 + 有 效 载 荷`
## 关 系：“信 封” 与 “信 件” 的 类 比
可 以 用 “邮 寄 信 件” 类 比 二 者 的 关 系：
报 文 = 信 件 的 “完 整 内 容”（信 封 + 信 纸 内 容）。
报 头 = 信 封 上 的 “邮 寄 信 息”（收 件 人 地 址、寄 件 人 地 址、邮 票、快 递 单 号 等）。
有 效 载 荷 = 信 纸 里 的 “实 际 内 容”（如 手 写 文 字、打 印 文 档）。

发 送 方 寄 出 信 件 时，会 在 “内 容” 外 包 裹 “信 封”（添 加 报 头）；接 收 方 收 到 后，先 看 信 封 信 息（解 析 报 头），再 取 出 里 面 的 内 容（提 取 有 效 载 荷）。
***
## 传 输 报 文 的 过 程
信 息 传 递 可 靠 性 保 证 数 据 有 序。每 一 层 都 有 报 头 和 协 议。

**发 送 方（封 装）**：应 用 层 - - - > 传 输 层 - - - > 网 络 层 - - -> 链 路 层。
**接 收 方（解 包 分 用）**：链 路 层 - - -> 网 络 层 - - -> 传 输 层 - - -> 应 用 层

**结 论**
1. 通 信 的 过 程 本 质 就 是 不 断 封 装 和 解 包 的 过 程。
2. 几 乎 任 何 层 的 协 议 都 要 将 报 头 和 有 效 载 荷 分 离。

**报 文 的 分 用**：几 乎 任 何 层 的 协 议 都 要 在 报 头 中 决 定 将 自 己 的 有 效 载 荷 交 付 给 上 层 的 哪 一 个 协 议。

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/4d1f41c0a9ca42ebb0ee9943408b3c5f.png)

**以 太 网 通 信 原 理**：

每 台 主 机 在 局 域 网 当 中 有 唯 一 的 编 号 和 Mac 地 址。每 一 台 主 机 的 硬 件 上，网 卡 上 有 唯 一 的 序 列 号，为 Mac 地 址。局 域 网 中 发 送 一 条 消 息 会 被 所 有 的 主 机 接 收 到。一 条 消 息 当 中 有 源 地 址 和 目 标 地 址。如 果 链 路 层 判 断 目 标 地 址 正 确 就 会 接 收 消 息，否 则 不 会 接 收 消 息。

破 坏 一 个 局 域 网，只 需 要 频 繁 发 送 垃 圾 消 息 和 正 确 消 息 进 行 数 据 碰 撞 就 会 损 坏 局 域 网。发 送 主 机 都 要 执 行 碰 撞 避 免 的 办 法。

**碰 撞 域**：局 域 网 构 成 的 众 多 主 机 构 成 了 碰 撞 域。主 机 之 间 会 检 测 是 否 碰 撞。

正 常 情 况 下，网 卡 会 丢 弃 许 多 数 据，网 卡 有 2 种 模 式，分 别 是 正 常 模 式 和 混 杂 模 式。局 域 网 当 中，主 机 越 多，碰 撞 的 概 率 越 大。交 换 机 可 以 划 分 碰 撞 域 缩 小 消 息 在 局 域 网 当 中 的 接 受 方 进 而 可 以 在 一 定 概 率 上 减 少 消 息 碰 撞。
***
如 何 看 待 局 域 网？
任 何 时 刻 只 允 许 主 机 向 局 域 网 中 发 送 消 息，局 域 网 是 所 有 主 机 的 共 享 的 临 界 资 源。
## 跨 网 络
### IP 地 址
IP 地 址 可 以 特 定 标 识 一 台 主 机 在 全 网 当 中 的 唯 一 性。
IP 协 议 有 两 个 版 本，IPv4 和 IPv6。IP 地 址 是 在 IP 协 议 中，用 来 标 识 网 络 中 不 同 主 机 的 地 址。
对 于 IPv4 来 说，IP 地 址 是 一 个 4 字 节，32 位 的 整 数。可 以 使 用 "点 分 十 进 制" 的 字 符 串 表 示 IP 地 址，例 如 192.168.0.1；用 点 分 割 的 每 一 个 数 字 表 示 一 个 字 节，范 围 是 0 - 255。
IP 地 址 是 一 直 不 变 的，可 以 进 行 路 径 规 划。
### Mac 地 址 
Mac 地 址 是 不 断 会 变 化 的。保 证 两 台 主 机 之 间 的 数 据 传 输。MAC 地 址 用 来 识 别 数 据 链 路 层 中 相 连 的 节 点。长 度 为 48 位 及 6 个 字 节。一 般 用 16 进 制 数 字 加 上 冒 号 的 形 式 来 表 示。在 网 卡 出 厂 时 就 确 定 了，不 能 修 改。mac 地 址 通 常 是 唯 一 的(虚 拟 机 中 的 mac 地 址 不 是 真 实 的 mac 地 址，可 能 会 冲 突，也 有 些 网 卡 支 持 用 户 配 置 mac 地 址)。
### 令 牌 环 网
跨 网 络 的 主 机 的 文 件 传 输。数 据 从 一 台 计 算 机 到 另 一 台 计 算 机 传 输 过 程 中 要 经 过 一 个 或 多 个 路 由 器。

令 牌 环 网 只 有 持 有 令 牌 的 节 点 才 能 发 送 数 据，以 此 避 免 多 个 节 点 同 时 发 送 导 致 的 冲 突。

**令 牌**：一 个 短 帧（通 常 为 3 字 节），状 态 分 为 “空 闲” 和 “忙”。空 闲 令 牌 在 环 网 中 循 环 传 递，等 待 被 节 点 获 取；忙 令 牌 则 附 着 在 数 据 帧 中，标 志 当 前 有 数 据 正 在 传 输。

**路 由 器** 是 网 络 中 的 核 心 互 联 设 备，工 作 在 OSI 模 型 的 网 络 层（第 三 层），主 要 功 能 是 连 接 多 个 不 同 的 网 络，并 根 据 IP 地 址 和 路 由 规 则 转 发 数 据 包，实 现 跨 网 络 的 通 信。也 可 以 进 行 局 部 的 解 包 和 封 装。

IP 协 议 屏 蔽 了 底 层 网 络 的 差 异 化，靠 的 就 是 工 作 在 IP 端 的 路 由 器。IP 实 现 了 全 球 主 机 的 软 件 虚 拟 层，一 切 皆 是 IP。

IP 地 址，尤 其 是 目 的 IP，一 般 是 不 会 改 变 的，协 助 我 们 进 行 路 径 选 择，mac 地 址，出 局 域 网 之 后，源 和 目 的 都 要 被 丢 弃，让 路 由 器 重 新 封 装。ipv6 是 因 为 ipv4 不 足 产 生 的。ipv4 和 ipv6 不 兼 容。
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/07817554d4084964b5394f2992b8cdf7.png)
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/5ba2b5811d0a404eaba91c3f82e6c95a.png)
## ifconfig
查 询 网 IP 配 置。
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/ae32fbbcbe05415fbbfc54bc29251e17.png)
eth0 为 网 络 接 口，inet 为 当 前 主 机 的 IP 地 址。ether 是 以 太 网，也 是 mac 地 址。netmask 是 子 网 掩 码，broadcast 是 广 播 地 址。
***
1. 在 进 行 网 络 通 信 的 时 候，两 台 设 备 的 应 用 层 在 进 行 通 信。应 用 层 需 要 被 发 起。网 络 协 议 中 的 下 三 层 主 要 解 决 的 是 数 据 安 全 可 靠 的 送 到 远 端 机 器。
2. 用 户 使 用 应 用 层 软 件 完 成 数 据 的 发 送 和 接 收。软 件 启 动 起 来 之 后 就 是 进 程。
3. 网 络 通 信 时，两 台 设 备 本 质 上 是 一 台 设 备 向 一 台 设 备 发 起 了 请 求，通 过 网 络 协 议 栈 的 接 口 来 完 成 通 信。网 络 通 信 的 本 质 是 进 程 间 相 互 交 换 数 据，也 就 是 进 程 间 通 信。
***
# 端 口 号
1. 端 口 号 (port) 是 传 输 层 协 议 的 内 容。端 口 号 是 一 个 2 字 节 16 位 的 整 数，端 口 号 用 来 标 识 一 个 进 程，告 诉 操 作 系 统，当 前 的 这 个 数 据 要 交 给 哪 一 个 进 程 来 处 理。**IP 地 址 + 端 口 号 能 够 标 识 网 络 上 的 某 一 台 主 机 的 某 一 个 进 程**。一 个 端 口 号 只 能 被 一 个 进 程 占 用。
2. 端 口 号 无 论 对 于 发 送 端 还 是 服 务 端，都 能 唯 一 的 标 识 该 主 机 上 的 一 个 网 络 进 程。进 程 有 许 多，但 是 网 络 协 议 栈 只 有 一 个。
3. 在 公 网 上，IP 地 址 能 唯 一 标 识 到 一 台 主 机，端 口 号 只 能 用 来 标 识 该 主 机 上 的 唯 一 的 一 个 进 程。IP + 端 口 号 可 以 标 识 唯 一 的 进 程。
# socket 套 接 字
通 信 的 时 候，客 户 端 有 自 己 的 IP 和 端 口 号，服 务 端 也 能 够 标 识 IP 和 端 口 号，通 过 这 两 对 IP 地 址 和 端 口 号 可 以 从 一 端 将 报 文 发 送 到 另 一 端。这 种 通 信 方 式 叫 做 socket。

**pid 已 经 能 够 表 示 主 机 上 进 程 的 唯 一 性，为 什 么 还 需 要 端 口 号？**
1. 不 是 所 有 的 进 程 都 需 要 网 络 通 信，但 是 所 有 的 进 程 都 要 pid。
2. 单 独 给 网 络 设 计 一 套 规 则，防 止 一 个 出 现 问 题 需 要 修 改 另 一 个。
3. 端 口 号 可 以 标 识 进 程 的 唯 一 性，但 更 多 的 是 为 了 实 现 系 统 和 网 络 的 解 耦，即 互 相 独 立。

客 户 端 知 晓 每 一 个 服 务 端 的 端 口 号。一 个 进 程 可 以 绑 定 多 个 端 口 号，一 个 端 口 号 不 能 被 多 个 进 程 绑 定。
***
# TCP 协 议
TCP 为 传 输 控 制 协 议，是 一 个 面 向 连 接、可 靠 传 输、面 向 字 节 流 的 协 议。
# UDP 协 议
UDP 是 用 户 数 据 报 协 议，即 客 户 端 发 送 一 个 信 息，服 务 端 就 需 要 接 受 一 个 信 息，直 接 发 送 不 会 询 问。它 的 特 点 是 传 输 层 协 议、无 连 接、不 可 靠 传 输、面 向 数 据 报。

可 靠 是 有 成 本 的，可 靠 需 要 更 多 的 维 护，比 较 复 杂。UDP 在 设 计 上 简 单，UDP 和 TCP 在 特 定 的 场 景 有 用 处。TCP 在 网 络 连 通 上 保 证 数 据 传 输 的 可 靠 性，UDP 是 不 可 靠 性。
# 网 络 字 节 序
内 存 中 的 多 字 节 数 据 相 对 于 内 存 地 址 有 [大 端 和 小 端](https://blog.csdn.net/2301_78847073/article/details/147169737) 之 分，磁 盘 文 件 中 的 多 字 节 数 据 相 对 于 文 件 中 的 偏 移 地 址 也 有 大 端 小 端 之 分，网 络 数 据 流 同 样 有 大 端 小 端 之 分。那 么 如 何 定 义 网 络 数 据 流 的 地 址 呢?
1. 发 送 主 机 通 常 将 发 送 缓 冲 区 中 的 数 据 按 内 存 地 址 从 低 到 高 的 顺 序 发 出。
2. 接 收 主 机 把 从 网 络 上 接 到 的 字 节 依 次 保 存 在 接 收 缓 冲 区 中，也 是 按 内 存 地 址 从 低 到 高 的 顺 序 保 存。
3. 网 络 数 据 流 的 地 址 应 这 样 规 定：先 发 出 的 数 据 是 低 地 址，后 发 出 的 数 据 是 高 地 址。
4. TCP / IP 协 议 规 定，网 络 数 据 流 应 采 用 大 端 字 节 序，即 低 地 址 高 字 节。不 管 这 台 主 机 是 大 端 机 还 是 小 端 机，都 会 按 照 这 个 TCP / IP 规 定 的 网 络 字 节 序 来 发 送 / 接 收 数 据。
5. 如 果 当 前 发 送 主 机 是 小 端，就 需 要 先 将 数 据 转 成 大 端，否 则 就 忽 略，直 接 发 送 即 可。
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/bcac101e5e1944cbb333bc763f78f2a2.png)
# socket 编 程 接 口
```
// 创建 socket 文件描述符 (TCP/UDP, 客户端 + 服务器)
int socket(int domain, int type, int protocol);
// 绑定端口号 (TCP/UDP, 服务器)
int bind(int socket, const struct sockaddr *address,socklen_t address_len);
// 开始监听socket (TCP, 服务器)
int listen(int socket, int backlog);
// 接收请求 (TCP, 服务器)
int accept(int socket, struct sockaddr* address,socklen_t* address_len);
// 建立连接 (TCP, 客户端)
int connect(int sockfd, const struct sockaddr *addr,socklen_t addrlen);
```
# sockaddr 结 构
socket API 是 一 层 抽 象 的 网 络 编 程 接 口，适 用 于 各 种 底 层 网 络 协 议，如 IPv4、IPv6。然 而，各 种 网 络 协 议 的 地 址 格 式 并 不 相 同。
域 间 套 接 字 是 在 同 一 个 设 备 内 的 多 个 进 程 间 进 行 通 信。
原 始 套 接 字 是 直 接 访 问 底 层，通 常 用 来 编 写 网 络 工 具。
网 络 套 接 字 是 使 用 传 输 层 进 行 用 户 间 的 传 输 通 信。

将 网 络 接 口 统 一 抽 象 化。参 数 的 类 型 统 一。

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/dce5d1b8e8ac4425b44b400ffd658594.png)
***
# 三、总 结
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本 文 覆 盖 了 静 态 库（.o 打 包、Makefile 构 建、-I/-L/-l 链 接）与 动 态 库（-fPIC/-shared 编 译、4 种 加 载 问 题 解 决 方 案）的 核 心 内 容。静 态 库 嵌 入 程 序、独 立 但 体 积 大，动 态 库 共 享 模 块、轻 量 但 需 依 赖 系 统，需 按 需 选 择。后 续 可 尝 试 封 装 通 用 模 块 为 库，或 研 究 版 本 管 理，进 一 步 提 升 开 发 效 率。


![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/d4027f37013e40408f63251e2f86090c.gif)