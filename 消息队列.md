@[TOC](文 章 目 录)
>💻作 者 简 介：曾 与 你 一 样 迷 茫，现 以 经 验 助 你 入 门 Linux。
>💡个 人 主 页：[@笑口常开xpr 的 个 人 主 页](https://blog.csdn.net/2301_78847073?spm=1000.2115.3001.5343)
>📚系 列 专 栏：[Linux 探 索 之 旅：从 命 令 行 到 系 统 内 核](https://blog.csdn.net/2301_78847073/category_13024932.html)
>✨代 码 趣 语：静 态 库 是 装 满 工 具 的 箱 子，编 译 时 全 塞 程 序，方 便 但 沉；动 态 库 是 共 享 架，记 位 置，没 工 具 就 卡 壳。
>💪代 码 千 行，始 于 坚 持，每 日 敲 码，进 阶 编 程 之 路。
>📦gitee 链 接：[gitee](https://gitee.com/xiaokouchangkai123)

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/fc8d52ed792a4cec88378dd286938beb.gif)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在 Linux C/C++ 开 发 中，库 是 代 码 复 用 和 工 程 化 的 核 心。不 少 开 发 者 会 遇 到 源 码 泄 露、编 译 “找 不 到 头 文 件 / 库”、动 态 库 运 行 加 载 失 败 等 问 题，本 质 是 对 库 的 流 程 不 熟 悉。本 文 从 背 景 切 入，先 讲 静 态 库 的 原 理、制 作 与 使 用，再 讲 动 态 库 的 实 战 技 巧，帮 你 掌 握 库 的 全 流 程 应 用。
***
# 消 息 队 列
## 原 理 
和 共 享 内 存 类 似，消 息 队 列 使 用 共 享 的 Key 值 来 区 分 队 列 是 否 存 在。
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/9935033b3e4447e59b2829480b34bf20.png)
**msgget**
获 取 消 息 队 列。
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/84bea76567ac4061a7c08500e1e71eed.png)
**msgctl**
销 毁 消 息 队 列。

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/e9cbb432a1ce4b14a7c80db82cd2ba29.png)
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/e576fad02c7b4a1f9097270436519e2c.png)
**msgsnd**
给 消 息 队 列 发 送 消 息。 
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/4cc859f406034f9b8d0b7aa0f04efb43.png)
**ipcs -q**
查 看 消 息 队 列
**ipcrm -q + msqid**
删 除 消 息 队 列。
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/66ca280a3eae4c9fa81ea45265991072.png)
**semget**
获 取 信 号 量。
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/f917449d33354cfbb56bca9248a1b79d.png)
**semctl**
控 制 信 号 量。
![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/63fc8c18cf3c4c018d84f969fa1642d7.png)
进 程 间 通 信 是 被 精 心 设 计 过 的，尤 其 是 System V 系 列。共 享 内 存，信 号 量，消 息 队 列 都 会 有 如 下 面 所 示 的 结 构。
```javascript
xxxid_ds
{
	struct ipc_perm XXX_perm;//第一个成员包含着key等内容
}
```
## 内 核 中 的 数 据 结 构 设 计
操作系统当中专门有设计的IPC（进程间通信模块）
# 信 号 量
# 三、总 结
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本 文 覆 盖 了 静 态 库（.o 打 包、Makefile 构 建、-I/-L/-l 链 接）与 动 态 库（-fPIC/-shared 编 译、4 种 加 载 问 题 解 决 方 案）的 核 心 内 容。静 态 库 嵌 入 程 序、独 立 但 体 积 大，动 态 库 共 享 模 块、轻 量 但 需 依 赖 系 统，需 按 需 选 择。后 续 可 尝 试 封 装 通 用 模 块 为 库，或 研 究 版 本 管 理，进 一 步 提 升 开 发 效 率。

![在这里插入图片描述](https://i-blog.csdnimg.cn/direct/d4027f37013e40408f63251e2f86090c.gif)